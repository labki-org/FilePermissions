{
	"name": "FilePermissions",
	"version": "1.0.0",
	"author": [
		"Daniel Aharoni"
	],
	"url": "https://www.mediawiki.org/wiki/Extension:FilePermissions",
	"type": "other",
	"license-name": "GPL-2.0-or-later",
	"description": "Group-based file permission system",
	"descriptionmsg": "filepermissions-desc",
	"requires": {
		"MediaWiki": ">= 1.44.0",
		"platform": {
			"php": ">= 8.1.0"
		}
	},
	"AutoloadNamespaces": {
		"FilePermissions\\": "includes/"
	},
	"TestAutoloadNamespaces": {
		"FilePermissions\\Tests\\": "tests/phpunit/"
	},
	"MessagesDirs": {
		"FilePermissions": [
			"i18n"
		]
	},
	"callback": "FilePermissions\\Hooks\\RegistrationHooks::onRegistration",
	"ServiceWiringFiles": [
		"includes/ServiceWiring.php"
	],
	"HookHandlers": {
		"enforcement": {
			"class": "FilePermissions\\Hooks\\EnforcementHooks",
			"services": [
				"FilePermissions.PermissionService"
			]
		},
		"upload": {
			"class": "FilePermissions\\Hooks\\UploadHooks",
			"services": [
				"FilePermissions.PermissionService"
			]
		},
		"display": {
			"class": "FilePermissions\\Hooks\\DisplayHooks",
			"services": [
				"FilePermissions.PermissionService"
			]
		},
		"SchemaChanges": {
			"class": "FilePermissions\\Hooks\\SchemaChangesHandler"
		}
	},
	"Hooks": {
		"getUserPermissionsErrors": "enforcement",
		"ImgAuthBeforeStream": "enforcement",
		"ImageBeforeProduceHTML": "enforcement",
		"UploadFormInitDescriptor": "upload",
		"UploadVerifyUpload": "upload",
		"UploadComplete": "upload",
		"ImagePageAfterImageLinks": "display",
		"BeforePageDisplay": "display",
		"EditPage::showEditForm:initial": "display",
		"LoadExtensionSchemaUpdates": "SchemaChanges"
	},
	"APIPropModules": {
		"fileperm": {
			"class": "FilePermissions\\Api\\ApiQueryFilePermLevel",
			"services": [
				"FilePermissions.PermissionService"
			]
		}
	},
	"APIModules": {
		"fileperm-set-level": {
			"class": "FilePermissions\\Api\\ApiFilePermSetLevel",
			"services": [
				"FilePermissions.PermissionService"
			]
		}
	},
	"AvailableRights": [
		"edit-fileperm"
	],
	"GroupPermissions": {
		"sysop": {
			"edit-fileperm": true
		}
	},
	"LogTypes": [
		"fileperm"
	],
	"LogNames": {
		"fileperm": "filepermissions-log-name"
	},
	"LogHeaders": {
		"fileperm": "filepermissions-log-header"
	},
	"LogActionsHandlers": {
		"fileperm/*": "LogFormatter"
	},
	"ResourceModules": {
		"ext.FilePermissions.indicator": {
			"localBasePath": "modules",
			"remoteExtPath": "FilePermissions/modules",
			"styles": [
				"ext.FilePermissions.edit.css"
			]
		},
		"ext.FilePermissions.edit": {
			"localBasePath": "modules",
			"remoteExtPath": "FilePermissions/modules",
			"packageFiles": [
				"ext.FilePermissions.edit.js"
			],
			"dependencies": [
				"mediawiki.api",
				"oojs-ui-core"
			],
			"messages": [
				"filepermissions-edit-success",
				"filepermissions-edit-error"
			]
		},
		"ext.FilePermissions.shared": {
			"localBasePath": "modules",
			"remoteExtPath": "FilePermissions/modules",
			"packageFiles": [
				"ext.FilePermissions.shared.js"
			],
			"dependencies": [
				"mediawiki.api"
			]
		},
		"ext.FilePermissions.msupload": {
			"localBasePath": "modules",
			"remoteExtPath": "FilePermissions/modules",
			"packageFiles": [
				"ext.FilePermissions.msupload.js"
			],
			"styles": [
				"ext.FilePermissions.msupload.css"
			],
			"dependencies": [
				"mediawiki.api",
				"ext.FilePermissions.shared"
			],
			"messages": [
				"filepermissions-msupload-label",
				"filepermissions-msupload-error-nolevels",
				"filepermissions-msupload-error-save"
			]
		},
		"ext.FilePermissions.visualeditor": {
			"localBasePath": "modules",
			"remoteExtPath": "FilePermissions/modules",
			"packageFiles": [
				"ext.FilePermissions.visualeditor.js"
			],
			"styles": [
				"ext.FilePermissions.visualeditor.css"
			],
			"dependencies": [
				"mediawiki.api",
				"oojs-ui-core",
				"mediawiki.ForeignStructuredUpload.BookletLayout",
				"ext.FilePermissions.shared"
			],
			"messages": [
				"filepermissions-ve-label",
				"filepermissions-ve-error-nolevels",
				"filepermissions-ve-error-save"
			]
		}
	},
	"QUnitTestModule": {
		"localBasePath": "tests/qunit",
		"remoteExtPath": "FilePermissions/tests/qunit",
		"scripts": [
			"ext.FilePermissions.shared.test.js"
		],
		"dependencies": [
			"ext.FilePermissions.shared"
		]
	},
	"config": {
		"FilePermLevels": {
			"value": [
				"public",
				"internal",
				"confidential"
			],
			"description": "Available permission levels for files"
		},
		"FilePermGroupGrants": {
			"value": {
				"sysop": [
					"*"
				],
				"user": [
					"public",
					"internal"
				]
			},
			"description": "Map of user groups to granted permission levels"
		},
		"FilePermDefaultLevel": {
			"value": null,
			"description": "Default permission level for new uploads (null = require explicit selection)"
		},
		"FilePermNamespaceDefaults": {
			"value": {},
			"description": "Map of namespace IDs to default permission levels"
		},
		"FilePermInvalidConfig": {
			"value": false,
			"description": "Internal flag set when configuration validation fails (fail-closed behavior)"
		}
	},
	"manifest_version": 2
}
